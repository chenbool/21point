var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),View=laya.ui.View,Dialog=laya.ui.Dialog,ui;!function(i){var t=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),t.prototype.createChildren.call(this),this.createView(i.GameUI.uiView)},e.uiView={type:"View",props:{width:480,height:800},child:[{type:"Image",props:{y:0,x:0,width:480,"var":"bg",skin:"ui/background.jpg",height:800}},{type:"Box",props:{y:649,x:19,"var":"chip_Deals"},child:[{type:"Image",props:{y:2,width:90,"var":"chip5",skin:"ui/chip_01.png",height:90}},{type:"Image",props:{y:3,x:119,width:90,"var":"chip10",skin:"ui/chip_02.png",height:90}},{type:"Image",props:{x:242,width:90,"var":"chip25",skin:"ui/chip_03.png",height:90}},{type:"Image",props:{x:361,width:90,"var":"chip100",skin:"ui/chip_04.png",height:90}}]},{type:"Image",props:{y:1,x:115,width:250,"var":"up_chip",skin:"ui/panels_btn_01.png",height:100}},{type:"Image",props:{y:400,x:470,width:250,visible:!1,"var":"deal",skin:"ui/panels_btn_08.png",height:100}},{type:"Box",props:{y:764,x:210,"var":"moneyNums"},child:[{type:"Clip",props:{width:25,skin:"ui/clip_number.png",name:"item0",index:0,height:30,clipX:10}},{type:"Clip",props:{x:23,width:25,skin:"ui/clip_number.png",name:"item1",index:0,height:30,clipX:10}},{type:"Clip",props:{x:48,width:25,skin:"ui/clip_number.png",name:"item2",index:0,height:30,clipX:10}},{type:"Clip",props:{x:71,width:25,skin:"ui/clip_number.png",name:"item3",index:0,height:30,clipX:10}},{type:"Clip",props:{x:93,width:25,skin:"ui/clip_number.png",name:"item4",index:0,height:30,clipX:10}},{type:"Clip",props:{x:117,width:25,skin:"ui/clip_number.png",name:"item5",index:0,height:30,clipX:10}}]},{type:"Box",props:{y:584,x:69,"var":"chipNums"},child:[{type:"Clip",props:{width:25,skin:"ui/clip_number.png",name:"item0",index:0,height:30,clipX:10}},{type:"Clip",props:{y:0,x:22,width:25,skin:"ui/clip_number.png",name:"item1",index:0,height:30,clipX:10}},{type:"Clip",props:{y:0,x:45,width:25,skin:"ui/clip_number.png",name:"item2",index:0,height:30,clipX:10}},{type:"Clip",props:{y:0,x:69,width:25,skin:"ui/clip_number.png",name:"item3",index:0,height:30,clipX:10}},{type:"Clip",props:{y:0,x:91,width:25,skin:"ui/clip_number.png",name:"item4",index:0,height:30,clipX:10}},{type:"Clip",props:{y:0,x:115,width:25,skin:"ui/clip_number.png",name:"item5",index:0,height:30,clipX:10}}]},{type:"Box",props:{y:649,x:19,visible:!1,"var":"tools"},child:[{type:"Image",props:{width:90,visible:!1,skin:"ui/buttons_01.png",height:90}},{type:"Image",props:{x:123,width:90,"var":"doubles",skin:"ui/buttons_02.png",height:90}},{type:"Image",props:{x:245,width:90,"var":"napai",skin:"ui/buttons_03.png",height:90}},{type:"Image",props:{x:361,width:90,"var":"pukeStop",skin:"ui/buttons_04.png",height:90}}]},{type:"Box",props:{y:375,x:376,visible:!1,"var":"pukeSumbox"},child:[{type:"Image",props:{width:250,skin:"ui/panels_btn_05.png",height:150}},{type:"Text",props:{y:56,x:13,width:93,"var":"pukeSum",text:"12",height:48,fontSize:45,font:"SimHei"}}]},{type:"Image",props:{y:305,x:115,width:250,visible:!1,"var":"enemyBao",skin:"ui/panels_btn_03.png",height:100}},{type:"Image",props:{y:305,x:115,width:250,visible:!1,"var":"myBao",skin:"ui/panels_btn_04.png",height:100}},{type:"Image",props:{y:305,x:115,width:250,visible:!1,"var":"ping",skin:"ui/panels_btn_07.png",height:100}},{type:"Image",props:{y:305,x:115,width:250,visible:!1,"var":"enemyWin",skin:"ui/panels_btn_12.png",height:100}},{type:"Image",props:{y:305,x:115,width:250,visible:!1,"var":"myWin",skin:"ui/panels_btn_13.png",height:100}},{type:"Image",props:{y:400,x:381,width:250,visible:!1,"var":"reStart",skin:"ui/panels_btn_10.png",height:100}}]},e}(View);i.GameUI=t}(ui||(ui={})),function(i){var t=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(i.StartUI.uiView)},e.uiView={type:"View",props:{y:0,x:0,width:480,height:800},child:[{type:"Image",props:{y:0,x:0,width:480,skin:"ui/titleScreen.jpg",height:800}},{type:"Animation",props:{y:590,x:241,width:180,"var":"startBtn",source:"start.ani",pivotY:40.38461538461536,pivotX:92.30769230769229,interval:50,height:90,autoPlay:!0}}]},e}(View);i.StartUI=t}(ui||(ui={}));var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),GameView=function(i){function t(t){void 0===t&&(t=0);var e=i.call(this)||this;return e.chip=0,e.chipState=!1,e.money=1e4,e.puke=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13],e.myPuke=[],e.enemyPuke=[],e.pukeNum=0,e.pukeX=0,e.money=t>0?t:e.money,e.updateMoney(),e.chip5.on(Laya.Event.CLICK,e,e.chip_5),e.chip10.on(Laya.Event.CLICK,e,e.chip_10),e.chip25.on(Laya.Event.CLICK,e,e.chip_25),e.chip100.on(Laya.Event.CLICK,e,e.chip_100),e.napai.on(Laya.Event.CLICK,e,e.deals),e.doubles.on(Laya.Event.CLICK,e,function(){this.money-=this.chip,this.updateMoney(),this.chip*=2,this.updateChip()}),e.pukeStop.on(Laya.Event.CLICK,e,function(){var i=this.pukeResSum(),t=this.enemyPukeSum(),e="ui/cards_"+this.enemyPuke[1]+".png",n=new Laya.Sprite;n.loadImage(e,220,50,100,135),Laya.stage.addChild(n),this.reStart.visible=!0,this.reStart.on(Laya.Event.CLICK,this,this.reSet),i>21?this.myBao.visible=!0:t>21?(this.enemyBao.visible=!0,this.money+=2*this.chip):t==i?(this.ping.visible=!0,this.money+=this.chip):i>t?(this.myWin.visible=!0,this.money+=2*this.chip):t>i&&(this.enemyWin.visible=!0),this.updateMoney(),this.bg.disabled=!0,this.tools.disabled=!0}),e}return __extends(t,i),t.prototype.reSet=function(){var i=this.money;this.removeSelf();var e=new t(i);Laya.stage.addChild(e)},t.prototype.chip_5=function(){this.chips(5)},t.prototype.chip_10=function(){this.chips(10)},t.prototype.chip_25=function(){this.chips(25)},t.prototype.chip_100=function(){this.chips(100)},t.prototype.chips=function(i){return this.chipState?(this.chip+=i,this.money-=i,this.updateChip(),this.updateMoney(),!1):(this.chip+=i,this.money-=i,this.updateMoney(),this.updateChip(),this.chipState=!0,Laya.Tween.to(this.up_chip,{y:-100},1e3,Laya.Ease.backInOut,Laya.Handler.create(this,this.up_chip_hide),300),this.deal.visible=!0,Laya.Tween.to(this.deal,{x:this.deal.x-100},2e3,Laya.Ease.elasticOut,null,500),this.deal.on(Laya.Event.CLICK,this,this.deals),void 0)},t.prototype.up_chip_hide=function(){this.up_chip.visible=!1},t.prototype.updateChip=function(){var i={},t=this.chip,e=5;for(e;e>0;e--)i["item"+e]={index:Math.floor(t%10)},t/=10;this.chipNums.dataSource=i},t.prototype.updateMoney=function(){var i={},t=this.money,e=5;for(e;e>0;e--)i["item"+e]={index:Math.floor(t%10)},t/=10;this.moneyNums.dataSource=i},t.prototype.deals=function(){var i=this.pukeResSum();if(i>21);else{0==this.pukeNum?(this.randomPuke(),this.randomPuke(),this.enemyLoad(),this.pukeNum=1):this.randomPuke(),this.deal.visible=!1,this.chip_Deals.visible=!1,this.tools.visible=!0,this.pukeSumbox.visible=!0;var t=this.pukeResSum();this.pukeSum.text=t+"点"}},t.prototype.randomPuke=function(){var i=this.pukeResSum();if(i>21)console.log("玩家爆掉了");else{var t=this.randoms();this.myPuke.push(t);var e="ui/cards_"+t+".png",n=new Laya.Sprite;n.loadImage(e,100+this.pukeX,this.deal.y+30,100,135),Laya.stage.addChild(n),this.pukeX+=30}},t.prototype.enemyLoad=function(){var i=this.randoms();this.enemyPuke.push(i);var t="ui/cards_"+i+".png",e=new Laya.Sprite;e.loadImage(t,180,50,100,135),Laya.stage.addChild(e);var n=new Laya.Sprite,p="ui/cards.png";e.loadImage(p,220,50,100,135),Laya.stage.addChild(n);var a=this.randoms();this.enemyPuke.push(this.puke[a])},t.prototype.randoms=function(){var i=Math.ceil(52*Math.random());return i},t.prototype.pukeResSum=function(){var i=0,t=this.puke;return this.myPuke.forEach(function(e){var n=t[e];n>10&&(n=10),i+=n}),i},t.prototype.enemyPukeSum=function(){var i=0,t=this.puke;return this.enemyPuke.forEach(function(e){var n=t[e];n>10&&(n=10),i+=n}),i},t}(ui.GameUI),__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),StartView=function(i){function t(){var t=i.call(this)||this;return t.startBtn.on(Laya.Event.CLICK,t,t.start),Laya.SoundManager.playMusic("res/sound/bg.mp3",1,Laya.Handler.create(t,t.onComplete)),t}return __extends(t,i),t.prototype.start=function(){this.removeSelf();var i=new GameView;Laya.stage.addChild(i)},t.prototype.onComplete=function(){console.log("音乐播放完成")},t}(ui.StartUI),Main=function(){function i(){Laya.init(480,800),this.init()}return i.prototype.init=function(){Laya.stage.scaleMode=Laya.Stage.SCALE_EXACTFIT,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.screenMode=Laya.Stage.SCREEN_VERTICAL;var i=[{url:"res/atlas/ui.json",type:Laya.Loader.ATLAS},{url:"ui/titleScreen.jpg",type:Laya.Loader.IMAGE},{url:"ui/background.jpg",type:Laya.Loader.IMAGE}];Laya.loader.load(i,Laya.Handler.create(this,this.onLoaded),Laya.Handler.create(this,this.onProgress))},i.prototype.onProgress=function(i){console.log("加载进度: ",i)},i.prototype.onLoaded=function(){var i=new StartView;Laya.stage.addChild(i)},i}();new Main;